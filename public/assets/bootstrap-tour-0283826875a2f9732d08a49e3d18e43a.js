!function(t,e){var o,n;return n=e.document,o=function(){function o(o){this._options=t.extend({name:"tour",container:"body",keyboard:!0,storage:e.localStorage,debug:!1,backdrop:!1,redirect:!0,orphan:!1,basePath:"",template:"<div class='popover'>          <div class='arrow'></div>          <h3 class='popover-title'></h3>          <div class='popover-content'></div>          <div class='popover-navigation'>            <div class='btn-group'>              <button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev</button>              <button class='btn btn-sm btn-default' data-role='next'>Next &raquo;</button>            </div>            <button class='btn btn-sm btn-default' data-role='end'>End tour</button>          </div>        </div>",afterSetState:function(){},afterGetState:function(){},afterRemoveState:function(){},onStart:function(){},onEnd:function(){},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNext:function(){},onPrev:function(){}},o),this._force=!1,this._inited=!1,this._steps=[],this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return o.prototype.setState=function(t,e){var o,n;if(this._options.storage){n=""+this._options.name+"_"+t;try{this._options.storage.setItem(n,e)}catch(r){o=r,o.code===DOMException.QUOTA_EXCEEDED_ERR&&this.debug("LocalStorage quota exceeded. setState failed.")}return this._options.afterSetState(n,e)}return null==this._state&&(this._state={}),this._state[t]=e},o.prototype.removeState=function(t){var e;return this._options.storage?(e=""+this._options.name+"_"+t,this._options.storage.removeItem(e),this._options.afterRemoveState(e)):null!=this._state?delete this._state[t]:void 0},o.prototype.getState=function(t){var e,o;return this._options.storage?(e=""+this._options.name+"_"+t,o=this._options.storage.getItem(e)):null!=this._state&&(o=this._state[t]),(void 0===o||"null"===o)&&(o=null),this._options.afterGetState(t,o),o},o.prototype.addSteps=function(t){var e,o,n,r;for(r=[],o=0,n=t.length;n>o;o++)e=t[o],r.push(this.addStep(e));return r},o.prototype.addStep=function(t){return this._steps.push(t)},o.prototype.getStep=function(e){return null!=this._steps[e]?t.extend({id:"step-"+e,path:"",placement:"right",title:"",content:"<p></p>",next:e===this._steps.length-1?-1:e+1,prev:e-1,animation:!0,container:this._options.container,backdrop:this._options.backdrop,redirect:this._options.redirect,orphan:this._options.orphan,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev},this._steps[e]):void 0},o.prototype.init=function(t){var e=this;return this._force=t,this.ended()?this._debug("Tour ended, init prevented."):(this.setCurrentStep(),this._setupMouseNavigation(),this._setupKeyboardNavigation(),this._onResize(function(){return e.showStep(e._current)}),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},o.prototype.start=function(t){var e;return null==t&&(t=!1),this._inited||this.init(t),null===this._current?(e=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(e,this.showStep,0)):void 0},o.prototype.next=function(){var t;return this.ended()?this._debug("Tour ended, next prevented."):(t=this.hideStep(this._current),this._callOnPromiseDone(t,this._showNextStep))},o.prototype.prev=function(){var t;return this.ended()?this._debug("Tour ended, prev prevented."):(t=this.hideStep(this._current),this._callOnPromiseDone(t,this._showPrevStep))},o.prototype.goTo=function(t){var e;return this.ended()?this._debug("Tour ended, goTo prevented."):(e=this.hideStep(this._current),this._callOnPromiseDone(e,this.showStep,t))},o.prototype.end=function(){var o,r,i=this;return o=function(){return t(n).off("click.tour-"+i._options.name),t(n).off("keyup.tour-"+i._options.name),t(e).off("resize.tour-"+i._options.name),i.setState("end","yes"),i._inited=!1,i._force=!1,null!=i._options.onEnd?i._options.onEnd(i):void 0},r=this.hideStep(this._current),this._callOnPromiseDone(r,o)},o.prototype.ended=function(){return!this._force&&!!this.getState("end")},o.prototype.restart=function(){return this.removeState("current_step"),this.removeState("end"),this.setCurrentStep(0),this.start()},o.prototype.hideStep=function(e){var o,n,r,i=this;return(r=this.getStep(e))?(n=this._makePromise(null!=r.onHide?r.onHide(this,e):void 0),o=function(){var e;return e=i._isOrphan(r)?t("body"):t(r.element),e.popover("destroy"),r.reflex&&e.css("cursor","").off("click.tour-"+i._options.name),r.backdrop&&i._hideBackdrop(),null!=r.onHidden?r.onHidden(i):void 0},this._callOnPromiseDone(n,o),n):void 0},o.prototype.showStep=function(e){var o,r,i,s,p=this;return(s=this.getStep(e))?(i=e<this._current,o=this._makePromise(null!=s.onShow?s.onShow(this,e):void 0),r=function(){var o,r;if(p.setCurrentStep(e),r=t.isFunction(s.path)?s.path.call():p._options.basePath+s.path,o=[n.location.pathname,n.location.hash].join(""),p._isRedirect(r,o))return p._redirect(s,r),void 0;if(p._isOrphan(s)){if(!s.orphan)return p._debug("Skip the orphan step "+(p._current+1)+". Orphan option is false and the element doesn't exist or is hidden."),i?p._showPrevStep():p._showNextStep(),void 0;p._debug("Show the orphan step "+(p._current+1)+". Orphans option is true.")}return s.backdrop&&p._showBackdrop(p._isOrphan(s)?void 0:s.element),p._scrollIntoView(s.element,function(){return null!=s.element&&s.backdrop&&p._showOverlayElement(s.element),p._showPopover(s,e),null!=s.onShown&&s.onShown(p),p._debug("Step "+(p._current+1)+" of "+p._steps.length)})},this._callOnPromiseDone(o,r),o):void 0},o.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this.setState("current_step",t)):(this._current=this.getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},o.prototype._showNextStep=function(){var t,e,o,n=this;return o=this.getStep(this._current),e=function(){return n.showStep(o.next)},t=this._makePromise(null!=o.onNext?o.onNext(this):void 0),this._callOnPromiseDone(t,e)},o.prototype._showPrevStep=function(){var t,e,o,n=this;return o=this.getStep(this._current),e=function(){return n.showStep(o.prev)},t=this._makePromise(null!=o.onPrev?o.onPrev(this):void 0),this._callOnPromiseDone(t,e)},o.prototype._debug=function(t){return this._options.debug?e.console.log("Bootstrap Tour '"+this._options.name+"' | "+t):void 0},o.prototype._isRedirect=function(t,e){return null!=t&&""!==t&&t.replace(/\?.*$/,"").replace(/\/?$/,"")!==e.replace(/\/?$/,"")},o.prototype._redirect=function(e,o){return t.isFunction(e.redirect)?e.redirect.call(this,o):e.redirect===!0?(this._debug("Redirect to "+o),n.location.href=o):void 0},o.prototype._isOrphan=function(e){return null==e.element||!t(e.element).length||t(e.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==t(e.element)[0].namespaceURI},o.prototype._showPopover=function(e,o){var n,r,i,s,p,a,h=this;return a=t.extend({},this._options),i=t.isFunction(e.template)?t(e.template(o,e)):t(e.template),r=i.find(".popover-navigation"),p=this._isOrphan(e),p&&(e.element="body",e.placement="top",i=i.addClass("orphan")),n=t(e.element),i.addClass("tour-"+this._options.name),e.options&&t.extend(a,e.options),e.reflex&&n.css("cursor","pointer").on("click.tour-"+this._options.name,function(){return h._current<h._steps.length-1?h.next():h.end()}),e.prev<0&&r.find("*[data-role=prev]").addClass("disabled"),e.next<0&&r.find("*[data-role=next]").addClass("disabled"),e.template=i.clone().wrap("<div>").parent().html(),n.popover({placement:e.placement,trigger:"manual",title:e.title,content:e.content,html:!0,animation:e.animation,container:e.container,template:e.template,selector:e.element}).popover("show"),s=n.data("bs.popover")?n.data("bs.popover").tip():n.data("popover").tip(),s.attr("id",e.id),this._reposition(s,e),p?this._center(s):void 0},o.prototype._reposition=function(e,o){var r,i,s,p,a,h,u;if(p=e[0].offsetWidth,i=e[0].offsetHeight,u=e.offset(),a=u.left,h=u.top,r=t(n).outerHeight()-u.top-e.outerHeight(),0>r&&(u.top=u.top+r),s=t("html").outerWidth()-u.left-e.outerWidth(),0>s&&(u.left=u.left+s),u.top<0&&(u.top=0),u.left<0&&(u.left=0),e.offset(u),"bottom"===o.placement||"top"===o.placement){if(a!==u.left)return this._replaceArrow(e,2*(u.left-a),p,"left")}else if(h!==u.top)return this._replaceArrow(e,2*(u.top-h),i,"top")},o.prototype._center=function(o){return o.css("top",t(e).outerHeight()/2-o.outerHeight()/2)},o.prototype._replaceArrow=function(t,e,o,n){return t.find(".arrow").css(n,e?50*(1-e/o)+"%":"")},o.prototype._scrollIntoView=function(o,n){var r,i,s,p,a,h=this;return o?(r=t(o),i=t(e),s=r.offset().top,a=i.height(),p=Math.max(0,s-a/2),this._debug("Scroll into view. ScrollTop: "+p+". Element offset: "+s+". Window height: "+a+"."),t("body").stop().animate({scrollTop:Math.ceil(p)},function(){return n(),h._debug("Scroll into view. Animation end element offset: "+r.offset().top+". Window height: "+i.height()+".")})):n()},o.prototype._onResize=function(o,n){return t(e).on("resize.tour-"+this._options.name,function(){return clearTimeout(n),n=setTimeout(o,100)})},o.prototype._setupMouseNavigation=function(){var e=this;return t(n).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=next]:not(.disabled)").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=next]:not(.disabled)",function(t){return t.preventDefault(),e.next()}),t(n).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=prev]:not(.disabled)").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=prev]:not(.disabled)",function(t){return t.preventDefault(),e.prev()}),t(n).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=end]").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=end]",function(t){return t.preventDefault(),e.end()})},o.prototype._setupKeyboardNavigation=function(){var e=this;if(this._options.keyboard)return t(n).on("keyup.tour-"+this._options.name,function(t){if(t.which)switch(t.which){case 39:return t.preventDefault(),e._current<e._steps.length-1?e.next():e.end();case 37:if(t.preventDefault(),e._current>0)return e.prev();break;case 27:return t.preventDefault(),e.end()}})},o.prototype._makePromise=function(e){return e&&t.isFunction(e.then)?e:null},o.prototype._callOnPromiseDone=function(t,e,o){var n=this;return t?t.then(function(){return e.call(n,o)}):e.call(this,o)},o.prototype._showBackdrop=function(){return this.backdrop.backgroundShown?void 0:(this.backdrop=t("<div/>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,t("body").append(this.backdrop))},o.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},o.prototype._hideBackground=function(){return this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1},o.prototype._showOverlayElement=function(e){var o,n,r;if(!this.backdrop.overlayElementShown)return this.backdrop.overlayElementShown=!0,n=t(e),o=t("<div/>"),r=n.offset(),r.top=r.top,r.left=r.left,o.width(n.innerWidth()).height(n.innerHeight()).addClass("tour-step-background").offset(r),n.addClass("tour-step-backdrop"),t("body").append(o),this.backdrop.$element=n,this.backdrop.$background=o},o.prototype._hideOverlayElement=function(){return this.backdrop.overlayElementShown?(this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1):void 0},o}(),e.Tour=o}(jQuery,window);